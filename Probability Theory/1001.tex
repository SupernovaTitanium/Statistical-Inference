\documentclass[Probability_Theory.tex]{subfiles}
\begin{document}
	\begin{center}
		\renewcommand{\arraystretch}{2}
		\begin{bfseries}
			\begin{tabular}{|c|}
				\hline
				Statistical Inference I \hfill Prof. Chin-Tsang Chiang\\
				\hspace{15em} {\large Lecture Notes 5} \hspace{15em}\ \\
				\lecdate \hfill Scribe: \scribe\\
				\hline
			\end{tabular}
			\renewcommand{\arraystretch}{1}
		\end{bfseries}
	\end{center}

After explaining the concept of independence, today we can finally introduce the Second Borel-Cantelli Lemma. A lemma that can lately be used to prove one of the most important result in probability theory, the strong law of large numbers. Also, we talk about another fundamental concept in probability, random variable, which let us change our views from set to the real field.   

\section{The Second Borel-Cantelli Lemma}
Also called the reverse Borel-Cantelli Lemma.
\begin{theorem}
Let $A_1,A_2,A_3...A_n...\in \mathcal{A}$ be mutually independent. If $\sum_{i=1}^{\infty}P(A_i)=\infty$, then	$$P(A_{n.i.o}) = 1$$
	, where $A_{n.i.o.} = \limsup_{n\rightarrow\infty}A_n.$
\end{theorem}
\begin{proof}
First Notice that since $\{A_n\}$ are independent, so $P(\bigcap_{k=n}^{n+j}A_k^c)=\prod_{k=n}^{n+j}(1-P(A_k))$ and $1-x\leq e^{-x}$ $\forall x\geq 0$ then $$P(\bigcap_{k=n}^{n+j}A_k^c)\leq e^{-\sum_{k=n}^{n+j}P(A_k)} \ \forall n$$
And $\sum_{i=1}^{\infty}P(A_i)=\infty$, one has 
$$\lim_{j\rightarrow\infty}P(\bigcap_{k=n}^{n+j}A_k^c)\leq \lim_{j\rightarrow\infty}e^{-\sum_{k=n}^{n+j}P(A_k)}=0$$ From Boole's inequality, it follows that $$P(\bigcup_{n=1}^\infty\bigcap_{k=n}^\infty A_k^c)\leq \sum_{n=1}^\infty P(\bigcap_{k=n}^\infty A_k^c)=0$$Then by De Morgan's rule we have,
$$P(\limsup_{n\rightarrow\infty}A_n)=P(\bigcap_{n=1}^\infty\bigcup_{k=n}^\infty A_k)=1-P(\bigcup_{n=1}^\infty\bigcap_{k=n}^\infty A_k^c)=1$$
\end{proof}
So when $\{A_n\}$ are mutually independent, combining both Borel-Cantelli lemma, we have a zero-one law: Borel's zero-one law
$$P(A_{n.i.o.})\text{ is either 0 or 1 with respect to} \sum_{i=1}^{\infty}P(A_i) \text{ converged or not}. 
$$
This give us a peek of Kolmogorov's zero-one law.
\begin{theorem}
Suppose a probability space $(\Omega,\mathcal{A},P)$and $A_n$ be a sequence of mutually independent $\sigma$-algebras contained in $\mathcal{A}$  then the tail events $F\in \bigcap_{n=1}^{\infty}G_n$ where $G_n=\sigma(\bigcup_{k=n}^\infty A_k)$ is either zero or one i.e. $P(F)=1$ or $P(F)=0$.
\end{theorem}
\begin{remark}
A naive way to understand the theorem is to consider if you have a sequence of independent random variables and an event that is invariant if you ignore finitely many of the variables, then the probability of that event is either 0 or 1 .
\end{remark}
\begin{remark}
Independent assumption is really important in the Borel's zero one law. If a event E with $0<P(E)<1$ and let a sequence of events $\{A_n\}$ where each $A_i=E$ then it is clear  $\{A_n\}$ are not independent at all and $P(A_{n.i.o.})=P(E)$ which violates the zero one law.
\end{remark}
\begin{intuition}[Borel Cantelli Lemma]
The Borel Cantelli Lemma enable us to construct probability in infinite many time/games from probability in sequence of events. If we toss a coin or play a independent game infinite many times, and let $A_n$ be events in $n$th toss/round. We can first study a pattern of coin or strategy in games has how much chance to win in one toss/round then use Borel Cantelli Lemma to extend it to infinite case that certain patterns will definitely happen or our strategy can finally win. An intersting example is given as below.
\end{intuition}
\begin{example}[Infinite Monkey Theorem]
Suppose a monkey has a typewriter, he types any alphabet at random. If he never stops typing, then he can almost surely type any Shakespeare's sonnet.
\end{example}
\begin{solve}
Consider the alphabets sequence the monkey types, we can divide this infinitely long string to infinitely many chunks, each chunk has length k where k equals to the number of alphabets in given Shakespeare's sonnet. Let $\{E_n\}$ denotes the monkey successfully types the sonnet in the $n$th chunk, then we have 
$$P(E_n)=\frac{1}{26^k}>0 \text{ so }\sum_{n=1}^\infty P(E_n)=\infty$$
And chunks are independent from one another. Using the Second Borel Cantelli Lemma, we get
$$P(E_{n.i.o.})=1$$ 
There are infinite many chunks, the monkey almost surely types Shakespeare's sonnet.
\end{solve}
\begin{remark}
In reality, the monkey can not fulfil this since not only did he has certain behavior pattern but also reality is a very big finite number. If the universe is filled with monkeys and they keep typing, the chance to type Hamlet is less than $\frac{1}{10^{183800}}$. The gap between infinite and finite is bigger than every big finite number we can guess.  
\end{remark}
\begin{example}[Strong Law of large number]We neglect the proof but argue how it can be used in proving it.We want to show that $$P(\lim_{n\rightarrow\infty}\frac{S_n}{n}=\mu)=P(\Omega_0)=1$$ 
Where $S_n=X_1+X_2...+X_n$ and $E(X_i)=\mu$ then it is equivalent to there exist $\Omega_0\in \mathcal{A}$ for every $w\in \Omega_0$ it holds that $$\lim_{n\rightarrow\infty}|\frac{S_n}{n}-\mu|=0$$ 
It suffices to show for any $\epsilon>0$, $|\frac{S_n}{n}-\mu|>\epsilon$ can occur only a finite number of times. And it can be done by Borel-Cantelli Lemma.
\end{example}
\section{Random Variables}
Before giving formal definition of what is a random variable. Let use first introduce two important terms, Borel sets and $\Sigma$-measurable function.
\begin{definition}[Borel $\sigma$-algebra]
Let S be a topological space then $\mathcal{B}(S)$, the Borel $\sigma$-algebra on S, is the $\sigma$-algebra generated by the family of open subsets of S. $$B(S):=\sigma(\text{open sets})$$
And $$B(R):=B$$
\end{definition}
Every subsets of R we we meet in everyday use is an element of $\mathcal{B}$; but elements of $\mathcal{B}$ can be quite complicated. An easy way to understand $\mathcal{B}$ is by the $\pi$ system (closed under finite intersection) $\xi$, $$\xi=\pi(R):=\{(-\infty,x]:x\in R\}$$ then $$B=B(R)=\sigma(\xi)$$
\begin{definition}[$\Sigma$-measurable function]
Suppose that $h:S\rightarrow\R$ then h is called a $\Sigma$-measurable function if $h^{-1}:\mathcal{B}\rightarrow\Sigma$, that is, $h^{-1}(\mathcal{A})\in \Sigma\ \forall \mathcal{A}\in\mathcal{B}.$
And we write $m\Sigma$ to be the set of all these measurable function on S.
\end{definition} 
\begin{definition}[Random variable]
Let $(\Omega,\mathcal{A})$ be our sample space and family of events. A random variable X  is an element of $m\mathcal{A}$ which will satisfied our random mechanism P. Thus,
$$X:\Sigma\rightarrow\R, X^{-1}:\mathcal{B}\rightarrow\mathcal{A}$$
\end{definition}
\begin{intuition}[Random variable]
Suppose X is a random variable carried by arbitrary probability triple $(\Omega,\mathcal{A},P)$ then we have $$\mathcal{B}\xrightarrow{X^{-1}} \mathcal{A} \xrightarrow{P} [0,1]$$
Define $\mu_x$ by 
$$\mu_x:=P\circ X^{-1} \text{  i.e.  } \mu_x(B)=P(\{w:X(w)\in B\})\  \forall B\in \mathcal{B}$$
And $\mu_x$ is actually a probability measure on $(R,\mathcal{B})$, then for any abstract probability space we can use X to change it to $(R,\mathcal{B})$ which we are familiar with. 
$$(\Omega,\mathcal{A},P)\xrightarrow{X} (R,\mathcal{B},\mu_x)$$ and define the function $F_X:R\rightarrow [0,1]$ as: 
$$F_x(c):=\mu_x((-\infty,c])=P(\{w:X(w)\leq c\})=P(X\leq c)$$
\end{intuition}
Now how can we verify any real-valued function X on $\Omega$ is indeed a random variable? We first begin from the reverse image of X. 
\begin{definition}[image of set function]
	Let $X:\Omega\rightarrow\mathcal{X}\subset\R$ be a set function. Then the preimage of $S\subset\R$ over $X$ is
	$$X^{-1}:=\{w\in\Omega:X(w)\in S \}$$
\end{definition}

\begin{property}[Properties of set function]\label{propertyofsetfuncs}
	Let $X:\Omega\rightarrow\mathcal{X}\subset\R$ be a set function, then the following properties hold. (Note that here $X$ is not necessary a random variable)
	\begin{enumerate}
		\item (Close under complementation): $X^{-1}(S^C) = (X^{-1}(S))^C$
		\item (Close under union): $X^{-1}(\bigcup_{\alpha\in\Gamma}S_{\alpha}) = \bigcup_{\alpha\in\Gamma}X^{-1}(S_i)$, where $\{S_{\alpha}\}_{\alpha\in\Gamma}$
		\item (Close under intersection): $X^{-1}(\bigcap_{\alpha\in\Gamma}S_{\alpha}) = \bigcap_{\alpha\in\Gamma}X^{-1}(S_i)$, where $\{S_{\alpha}\}_{\alpha\in\Gamma}$
	\end{enumerate}
\end{property}

By definition, a random variable should satisfy the condition that the preimage of every Borel set should in the event space $\mathcal{A}$. However, it's difficult to check since it's hard to enumerate all Borel set and claim the results. Thus, we would like to find a relaxed but necessary condition for a set function to be a random variable. And the following theorem does so.

\begin{theorem}[necessary and sufficient condition for random variable]\label{rvnscondition}
	Let $X:\Omega\rightarrow\mathcal{X}\subset\R$ be a set function, then
	$$X\mbox{ is a random variable}\Leftrightarrow \forall x\in\R,\ \{w:X(w)\leq x\}\in\mathcal{A}$$
\end{theorem}
The proof is left in Appendix~\ref{sec:proofrvnscondition}

\section{From Set Function to Value Function}
Note that random variable is a function that helps us map the event set $\mathcal{A}$ onto the Borel set. The importance here is that know we can do the equivalent operation on {\bf real number} instead of arbitrary $\sigma$-algebra. This not only provides us a general and uniform way to play but also gives us the opportunity to operate on an {\bf ordered} set.

Soon, we might wonder can we play with an even more general function: value function instead of just a set function onto real number? And by the construction of random variable, there are two direct value functions that play an important role in probability theory.
\begin{theorem}[value functions]
	Let $X$ be a random variable w.r.t. $(\Omega,\mathcal{A},P)$, then we can define
	\begin{itemize}
		\item The measure function of $X$ is $\mu_X:\mathcal{B}\rightarrow\mathbf{R}^+$ such that $$\forall B\in\mathcal{B},\ \mu_X(B):=P\{w:X(w)\in B\}$$
		\item The cumulative distribution of $X$ is $F_X:\mathbf{R}\rightarrow\mathbf{R}^+$ such that $$\forall x\in\mathbf{R},\ F_X(x):=P\{w:X(w)\leq x \}$$
	\end{itemize}
\end{theorem}

Here, we also have a necessary and sufficient condition for cumulative function. Intuitively, when a function $F$ satisfies the following conditions, then there's a random variable with its unique cumulative distribution being $F$.

\begin{theorem}[necessary and sufficient condition of cumulative distribution]
	$F$ is a cumulative distribution iff
	\begin{itemize}
		\item (upper and lower bound) $\lim_{x\rightarrow\infty}F(x)=0,\ \lim_{x\rightarrow\infty}F(x) = 1$
		\item (non-decreasing) $\forall x\leq y$, $F(x)\leq F(y)$
		\item (right continuous) $\lim_{x\rightarrow x_0^+} = F(x_0)$
	\end{itemize}
\end{theorem}
The proof is left in Appendix~\ref{sec:proofcfnscondition}.


\begin{intuition}[set function and value function]
	Careful with the difference of 
	\begin{itemize}
		\item ({\bf random variable}): $X:\Omega\rightarrow S\subset\R$
		\item ({\bf measure function}): $\mu_X:\mathcal{B}\rightarrow\R^+$
		\item ({\bf cumulative distribution}): $F_X:\R\rightarrow\R^+$
	\end{itemize}
\end{intuition}


\appendix
\section{Proof of the necessary and sufficient condition of random variable}\label{sec:proofrvnscondition}
Recall that Theorem~\ref{rvnscondition} provides a necessary and sufficient condition for a set function to be a random variable. Here, we prove the correctness of the theorem.

($\Rightarrow$) First, we can see that $\{w:X(w)\leq x\} = X^{-1}[(-\infty,x)]$. Thus, it's sufficient to show that $(-\infty,x)$ is in Borel set $\forall x$. And this is simple since $(-\infty,x) = \bigcup_{n\in\mathbb{N}}[-n,x]\in\mathcal{B}$.

($\Leftarrow$) This direction can be proved in two steps:
\begin{enumerate}
	\item Show that $\forall a<b,\ X^{-1}([a,b])\in\mathcal{A}$.
	\item Show that $\xi = \{S:\exists w\in\Omega,\ X(w)=S \}$ is a $\sigma$-algebra.
\end{enumerate}
With these two results, we can see that the image of $X$ contains $\mathcal{B}$. Thus, $X$ is a random variable. The following show the correctness of these two:
\begin{enumerate}
	\item $\forall a<b$, consider
	\begin{align*}
	X^{-1}([a,b]) &= X^{-1}((-\infty,b]\backslash(-\infty,a]) = X^{-1}((-\infty,b]\cap(-\infty,a])^C)\\
	&= X^{-1}((-\infty,b]) \cap X^{-1}((-\infty,a])^C)\\
	&=  X^{-1}((-\infty,b]) \cap X^{-1}((-\infty,a]))^C\in\mathcal{A}
	\end{align*}
	\item Check the three axioms of $\sigma$-algebra:
	\begin{enumerate}
		\item Clearly, $\emptyset\in\xi$.
		\item $\forall S\in\xi$, $X^{-1}(X^C) = X^{-1}(S)^C\in\mathcal{A}$ by Property~\ref{propertyofsetfuncs}. Thus $S^C\in\xi$.
		\item $\forall \{S_{\alpha}\}_{\alpha\in\Gamma}\in\xi$, $X^{-1}(\bigcup_{\alpha\in\Gamma}S_{\alpha}) = \bigcup_{\alpha\in\Gamma}X^{-1}(S_{\alpha})\in\mathcal{A}$. Thus $\bigcup_{\alpha\in\Gamma}S_{\alpha}\in\xi$.
	\end{enumerate}
\end{enumerate}


\section{Proof of the necessary and sufficient condition of cumulative function}\label{sec:proofcfnscondition}

\end{document}




